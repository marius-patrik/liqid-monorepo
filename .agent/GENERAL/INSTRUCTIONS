# Agent Instructions

> **IMPORTANT**: This file contains AI agent-specific instructions and detailed procedures. For fundamental rules, see [RULES](RULES). For command documentation, see [COMMANDS](COMMANDS).

## Agent Folder Structure

The `agent/` folder contains all agent configuration and documentation:

```
agent/
â”œâ”€â”€ GENERAL/          # General rules (always apply)
â”‚   â”œâ”€â”€ RULES         # Fundamental rules
â”‚   â”œâ”€â”€ INSTRUCTIONS  # Detailed procedures (this file)
â”‚   â”œâ”€â”€ COMMANDS      # Command documentation
â”‚   â””â”€â”€ IDE.example   # IDE configuration template
â”œâ”€â”€ EXAMPLE/          # Templates for LIVE files
â”‚   â”œâ”€â”€ PROJECT_GUIDELINES.example
â”‚   â”œâ”€â”€ PROGRESS.example
â”‚   â”œâ”€â”€ PRODUCT.example
â”‚   â”œâ”€â”€ FEATURE_PRD.example
â”‚   â”œâ”€â”€ CUSTOM_RULES.example
â”‚   â”œâ”€â”€ CUSTOM_INSTRUCTIONS.example
â”‚   â””â”€â”€ CUSTOM_COMMANDS.example
â””â”€â”€ LIVE/             # Workspace-specific files (ignored during init)
    â”œâ”€â”€ <project_name>/       # Per-project subfolder (when multiple projects exist)
    â”‚   â”œâ”€â”€ PROJECT_GUIDELINES
    â”‚   â”œâ”€â”€ PROGRESS
    â”‚   â”œâ”€â”€ PRODUCT
    â”‚   â””â”€â”€ FEATURE_PRD[_<name>]
    â””â”€â”€ CUSTOM_* (optional)
```

### Multi-Project Structure

When the root contains **multiple projects** (e.g., monorepo with multiple packages/apps):

1. **Create a subfolder** in `agent/LIVE/` for each project
2. **Name the subfolder** after the project (e.g., `@plcl-core`, `plcl-docs`)
3. **Each subfolder contains**:
   - `PROJECT_GUIDELINES` - Project-specific instructions
   - `PROGRESS` - Project-specific progress tracking
   - `PRODUCT` - Project-specific product description
   - `FEATURE_PRD[_<name>]` - Project-specific feature PRDs

**Example** for a monorepo with multiple packages:
```
agent/LIVE/
â”œâ”€â”€ @plcl-core/
â”‚   â”œâ”€â”€ PROJECT_GUIDELINES
â”‚   â”œâ”€â”€ PROGRESS
â”‚   â”œâ”€â”€ PRODUCT
â”‚   â””â”€â”€ FEATURE_PRD[_<name>]
â”œâ”€â”€ @plcl-ui/
â”‚   â”œâ”€â”€ PROJECT_GUIDELINES
â”‚   â”œâ”€â”€ PROGRESS
â”‚   â”œâ”€â”€ PRODUCT
â”‚   â””â”€â”€ FEATURE_PRD[_<name>]
â””â”€â”€ plcl-docs/
    â”œâ”€â”€ PROJECT_GUIDELINES
    â”œâ”€â”€ PROGRESS
    â”œâ”€â”€ PRODUCT
    â””â”€â”€ FEATURE_PRD[_<name>]
```

---

## Workspace Documentation (agent/LIVE/)

The `agent/LIVE/` directory contains workspace-specific documentation. These files are **ignored during agent initialization** but should be referenced and maintained during active work.

### Required Files (Per Project)

| File                 | Purpose                                                                         |
| -------------------- | ------------------------------------------------------------------------------- |
| `PROJECT_GUIDELINES` | Project-specific instructions, coding standards, and guidelines to keep in mind |
| `PROGRESS`           | Track all development progress, milestones, and completed work                  |
| `PRODUCT`            | Periodically updated product description, vision, and roadmap                   |
| `FEATURE_PRD`        | Feature-specific PRD created **before** implementing each feature               |

### Initialization

**MANDATORY**: Initialize workspace documentation based on project structure:

#### Single Project (no subfolders needed)

If the root contains a **single project**, copy files directly to `agent/LIVE/`:

```
agent/EXAMPLE/PROJECT_GUIDELINES.example â†’ agent/LIVE/PROJECT_GUIDELINES
agent/EXAMPLE/PROGRESS.example           â†’ agent/LIVE/PROGRESS
agent/EXAMPLE/PRODUCT.example            â†’ agent/LIVE/PRODUCT
agent/EXAMPLE/FEATURE_PRD.example        â†’ agent/LIVE/FEATURE_PRD
```

#### Multiple Projects (subfolders required)

If the root contains **multiple projects** (monorepo, multiple packages/apps):

1. **Identify all projects** in the root (packages, apps, libraries)
2. **Create a subfolder** in `agent/LIVE/` for each project
3. **Copy template files** into each project subfolder:

```
For each project (e.g., @plcl-core, @plcl-ui, plcl-docs):
agent/EXAMPLE/PROJECT_GUIDELINES.example â†’ agent/LIVE/<project>/PROJECT_GUIDELINES
agent/EXAMPLE/PROGRESS.example           â†’ agent/LIVE/<project>/PROGRESS
agent/EXAMPLE/PRODUCT.example            â†’ agent/LIVE/<project>/PRODUCT
agent/EXAMPLE/FEATURE_PRD.example        â†’ agent/LIVE/<project>/FEATURE_PRD
```

**Example initialization for a monorepo:**
```bash
# Create subfolders for each project
mkdir -p agent/LIVE/@plcl-core agent/LIVE/@plcl-ui agent/LIVE/plcl-docs

# Copy templates to each project folder
for project in @plcl-core @plcl-ui plcl-docs; do
  cp agent/EXAMPLE/PROJECT_GUIDELINES.example agent/LIVE/$project/PROJECT_GUIDELINES
  cp agent/EXAMPLE/PROGRESS.example agent/LIVE/$project/PROGRESS
  cp agent/EXAMPLE/PRODUCT.example agent/LIVE/$project/PRODUCT
  cp agent/EXAMPLE/FEATURE_PRD.example agent/LIVE/$project/FEATURE_PRD
done
```

### How to Use Each File

1. **PROJECT_GUIDELINES** - Store project-specific instructions:
   - Any instruction the user gives about the project
   - Coding standards and conventions
   - Architecture patterns and design decisions
   - **Update**: Whenever the user provides new project-level instructions
   - **Multi-project**: Each project has its own guidelines file

2. **PROGRESS** - Track all development progress:
   - Log completed work with dates
   - Track milestones and achievements
   - Document current project status
   - **Update**: After completing significant work or at the end of each session
   - **Multi-project**: Each project tracks its own progress separately

3. **PRODUCT** - Describe the product:
   - Product vision and goals
   - Key features and capabilities
   - Target users and use cases
   - **Update**: Periodically as the product evolves
   - **Multi-project**: Each project has its own product description

4. **FEATURE_PRD** - Document features before implementation:
   - Feature requirements and specifications
   - User stories and acceptance criteria
   - Technical approach and implementation plan
   - **Create**: A new `FEATURE_PRD_<name>` for every significant feature
   - **MANDATORY**: Get user approval before proceeding with implementation
   - **Multi-project**: Place in project subfolder with other project files

### Feature PRD Workflow

**MANDATORY** before implementing any significant feature:

1. Create `FEATURE_PRD_<feature_name>` in appropriate location:
   - **Single project**: `agent/LIVE/FEATURE_PRD_<name>`
   - **Multi-project**: `agent/LIVE/<project>/FEATURE_PRD_<name>`
2. Document requirements, goals, and implementation approach
3. Get user approval on the PRD
4. Update the PRD as implementation progresses
5. Mark the feature as complete when done

---

## Session Initialization

**MANDATORY**: At the beginning of every coding session:

1. **Read General Rules**:
   - `agent/GENERAL/RULES`
   - `agent/GENERAL/INSTRUCTIONS` (this file)
   - `agent/GENERAL/COMMANDS`

2. **Read Project Documentation**:
   - `README.md` for project overview
   - `TODO.md` for current tasks

3. **Initialize Workspace Documentation**:
   - Check if `agent/LIVE/` files exist
   - **Single project**: Copy templates directly to `agent/LIVE/`
   - **Multi-project**: Create subfolders for each project and copy templates
   - If missing, copy from `agent/EXAMPLE/` templates (see Initialization section above)

4. **Review Workspace Documentation**:
   - **Single project**: Review files in `agent/LIVE/`
   - **Multi-project**: Review files in each `agent/LIVE/<project>/` subfolder
   - Review `PROJECT_GUIDELINES` for project-specific instructions
   - Review `PROGRESS` for current status
   - Review `PRODUCT` to understand each product

5. **Analyze Codebase**:
   - Review package structure and organization
   - Understand architecture and patterns
   - Review key configuration files
   - **EXCEPTION**: Files in `agent/LIVE/` are ignored during initial analysis

6. **Establish Context**:
   - Understand current project state
   - Identify patterns and conventions in use
   - Note recent changes or ongoing work

---

## Task Management

### Todo Tracking

- Create todo entries in `TODO.md` before starting work (unless using `:now` command)
- Status indicators:
  - â¬œ Not started
  - ðŸ”„ In progress
  - âœ… Completed
  - âŒ Cancelled
- Create todos for complex tasks (3+ steps)

### Planning Before Execution

- Break down complex tasks into actionable steps
- Identify dependencies between tasks
- **MANDATORY**: Prompt user with plan before beginning execution
- Wait for user confirmation before proceeding
- Update plan if new information is discovered

### TODO.md Structure

1. **Tasks** - Regular development tasks
2. **Active Checks** - Items to verify during every session
3. **End of Development** - Items for releases only

---

## Quality Assurance Checklist

**MANDATORY** after completing ANY task:

1. **Verify Implementation** - Confirm the feature works as intended
2. **Run Lint** - Fix ALL linting issues
3. **Run Build** - Fix ALL build errors
4. **Test Functionality** - Test edge cases, verify no regressions
5. **Keep Code Simple** - Refactor if overly complicated
6. **Update Todos** - Mark completed tasks in `TODO.md`
7. **Update Documentation** - Update all affected documentation
8. **Update Progress** - Log work in `agent/LIVE/PROGRESS`

---

## Custom Rules (Optional)

To add project-specific customizations, create files in `agent/LIVE/`:

- `CUSTOM_RULES` - Project-specific rules
- `CUSTOM_INSTRUCTIONS` - Project-specific procedures
- `CUSTOM_COMMANDS` - Project-specific commands

Copy templates from `agent/EXAMPLE/` if needed. Custom rules supplement but do not replace general rules.

---

## Command Handling

> All command documentation is in [COMMANDS](COMMANDS).

---

## Getting Help

If you encounter issues:

1. Check existing code for similar patterns
2. Review project examples if available
3. Check `TODO.md` for related tasks
4. Review `PROJECT_GUIDELINES` for project-specific rules
5. Review [RULES](RULES) for fundamental rules
6. Follow the quality assurance checklist
